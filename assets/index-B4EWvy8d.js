(function(){const q=document.createElement("link").relList;if(q&&q.supports&&q.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))I(i);new MutationObserver(i=>{for(const h of i)if(h.type==="childList")for(const x of h.addedNodes)x.tagName==="LINK"&&x.rel==="modulepreload"&&I(x)}).observe(document,{childList:!0,subtree:!0});function L(i){const h={};return i.integrity&&(h.integrity=i.integrity),i.referrerPolicy&&(h.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?h.credentials="include":i.crossOrigin==="anonymous"?h.credentials="omit":h.credentials="same-origin",h}function I(i){if(i.ep)return;i.ep=!0;const h=L(i);fetch(i.href,h)}})();const H=function(){let D=[];function q(i,h=!0){if(D.length===2)return;const x={playerType:i,board:n.create(),isHuman:h};return D.push(x),x}function L(){D=[]}function I(i){return D.find(h=>h.playerType===i)||null}return{create:q,reset:L,getPlayer:I}}(),oe=function(){function D(q){return{notHitCells:[],hitCells:[],length:q,hits:0,hit(L,I){for(let i=0;i<this.hitCells.length;i++){const h=this.hitCells[i];if(h[0]===L&&h[1]===I)return}for(let i=0;i<this.notHitCells.length;i++){const h=this.notHitCells[i];if(h[0]===L&&h[1]===I){this.hitCells.push(h),this.notHitCells.splice(i,1),this.hits++;return}}},isSunk(){return this.hits>=q}}}return{create:D}}(),n=function(){const D=[5,4,3,3,2];let q=Array(10).fill().map(()=>Array(10).fill(null)),L="player1",I="single";function i(){return L}function h(d){L=d}function x(){I==="single"&&(L=L==="player1"?"computer":"player1"),I==="multi"&&(L=L==="player1"?"player2":"player1")}function C(){return I}function j(d){I=d,L="player1"}function W(){return q}function X(){return D}function F(){return Array(10).fill().map(()=>Array(10).fill(null))}function V(d,y,u,v,P=!0){if(d<0||d>=u.length||y<0||y>=u[0].length||P&&y+v>u[0].length||!P&&d+v>u.length)return!1;for(let w=0;w<v;w++){const B=P?d:d+w,M=P?y+w:y;if(u[B][M]!==null)return!1}for(let w=0;w<v;w++){const B=P?d:d+w,M=P?y+w:y;if(M>0&&u[B][M-1]!==null||M<u[0].length-1&&u[B][M+1]!==null||B>0&&u[B-1][M]!==null||B<u.length-1&&u[B+1][M]!==null||B>0&&M>0&&u[B-1][M-1]!==null||B>0&&M<u[0].length-1&&u[B-1][M+1]!==null||B<u.length-1&&M>0&&u[B+1][M-1]!==null||B<u.length-1&&M<u[0].length-1&&u[B+1][M+1]!==null)return!1}return!0}function Q(d,y,u,v,P=!0){if(V(d,y,u,v.length,P))for(let w=0;w<v.length;w++){const B=P?d:d+w,M=P?y+w:y;u[B][M]=v,v.notHitCells.push([B,M])}}function Y(d,y,u){if(d<0||d>=u.length||y<0||y>=u[0].length||u[d][y]==="miss")return!1;if(u[d][y]===null&&(u[d][y]="miss"),typeof u[d][y]=="object"&&u[d][y]!==null){const v=u[d][y];if(v.hitCells.some(([P,w])=>P===d&&w===y))return!1;v.hit(d,y)}}function J(d=q){for(let y=0;y<d.length;y++)for(let u=0;u<d[y].length;u++){const v=d[y][u];if(typeof v=="object"&&v!==null&&!v.isSunk())return!1}return!0}function Z(d){D.forEach(y=>{let u=!1;for(;!u;){const v=Math.random()<.5,P=d.length-(v?1:y),w=d[0].length-(v?y:1),B=Math.floor(Math.random()*(P+1)),M=Math.floor(Math.random()*(w+1)),R=oe.create(y),N=d.map(A=>[...A]);Q(B,M,d,R,v),u=!1;for(let A=0;A<y;A++){const z=v?B:B+A,$=v?M+A:M;if(d[z][$]===R){u=!0;break}}if(!u)for(let A=0;A<d.length;A++)for(let z=0;z<d[A].length;z++)d[A][z]=N[A][z]}})}function K(d){const y={};for(const P of D)y[P]=(y[P]||0)+1;const u={},v=new Set;for(let P=0;P<d.length;P++)for(let w=0;w<d[P].length;w++){const B=d[P][w];if(typeof B=="object"&&B!==null&&!v.has(B)){const M=B.length;u[M]=(u[M]||0)+1,v.add(B)}}return Object.entries(y).every(([P,w])=>u[P]===w)}function O(d){const y=new Set;for(let u=0;u<d.length;u++)for(let v=0;v<d[u].length;v++){const P=d[u][v];typeof P=="object"&&P!==null&&!y.has(P)&&(console.log(P),y.add(P))}}return{getBoard:W,create:F,place:Q,receiveAttack:Y,isGameOver:J,placeShipsRandomly:Z,areShipsPlaced:K,getCurrentPlayer:i,setCurrentPlayer:h,getShipSizes:X,canBePlaced:V,setGameMode:j,getGameMode:C,toggleCurrentPlayer:x,printShips:O}}(),_=function(){const D={player1:{gameStarted:!1,draggedShipLength:null,draggedShipName:null,toggle3:!0,isHorizontal:!0,highlightedCells:new Set},player2:{gameStarted:!1,draggedShipLength:null,draggedShipName:null,toggle3:!0,isHorizontal:!0,highlightedCells:new Set},computer:{gameStarted:!1,draggedShipLength:null,draggedShipName:null,toggle3:!0,isHorizontal:!0,highlightedCells:new Set}};let q=[],L=new Map;const I=new Map;function i(e,t,c){const l=`${e.id||e.className||Math.random()}-${t}`;if(I.has(l)){const f=I.get(l);e.removeEventListener(t,f)}e.addEventListener(t,c),I.set(l,c)}function h(){const e=n.getCurrentPlayer();return D[e]}const x=function(){function e(){t(),c(),f()}function t(){document.querySelectorAll(".random-placement").forEach(r=>{i(r,"click",()=>{const o=H.getPlayer(n.getCurrentPlayer()),s=n.getCurrentPlayer();O(s),n.placeShipsRandomly(o.board),C.singleBoard(s),ie(),n.areShipsPlaced(o.board)&&M()})})}function c(){document.querySelectorAll(".start-game").forEach(r=>{r.disabled=!0,n.getGameMode()==="single"&&i(r,"click",()=>{d(),B(),D.player1.gameStarted=!0}),n.getGameMode()==="multi"&&i(r,"click",()=>{const o=n.getCurrentPlayer(),s=D[o];o==="player1"&&(y(),s.gameStarted=!0),o==="player2"&&(B(),s.gameStarted=!0,y())})})}function l(){const a=document.querySelectorAll(".direction");a.forEach(r=>{i(r,"click",o=>{const s=h();s.isHorizontal=!s.isHorizontal,r.textContent=s.isHorizontal?"Horizontal":"Vertical",document.querySelectorAll(".ship-container").forEach(g=>{g.style.flexDirection=s.isHorizontal?"row":"column"})})}),i(document,"keydown",r=>{if(r.key.toLowerCase()==="r"&&!h().gameStarted){const o=h();o.isHorizontal=!o.isHorizontal,a.forEach(m=>m.textContent=o.isHorizontal?"Horizontal":"Vertical"),document.querySelectorAll(".ship-container").forEach(m=>{m.style.flexDirection=o.isHorizontal?"row":"column"})}})}function f(){document.querySelectorAll(".reset-board").forEach(r=>{i(r,"click",o=>{const s=n.getCurrentPlayer();O(s),C.singleBoard(s),C.ships()})})}function S(){n.getGameMode()==="single"&&(x.players(),C.boards(),C.ships(),x.buttons(),x.orientationToggle(),Y()),n.getGameMode()==="multi"&&(Y(),x.players(),x.secondPlayerBoard(),x.buttons(),x.orientationToggle(),C.boards(),C.ships())}function b(){n.getGameMode()==="single"&&(H.reset(),H.create("player1"),H.create("computer")),n.getGameMode()==="multi"&&(H.reset(),H.create("player1"),H.create("player2"))}function p(){const a=document.getElementById("computer");a.dataset.player="player2",a.style.visibility="hidden";const r=document.getElementById("computer-board");r.dataset.player="player2";const o=document.querySelector("#computer .gameBoard-content");o.style.visibility="visible";const s=a.querySelector(".title-container");s.style.visibility="visible";const m=a.querySelector(".title-container h1");m.textContent="Player 2 Fleet"}return{buttons:e,randomShipPlacementButton:t,startButton:c,orientationToggle:l,resetButton:f,game:S,players:b,secondPlayerBoard:p}}(),C=function(){function e(){n.getGameMode()==="single"&&(C.singleBoard("player1"),C.singleBoard("computer")),n.getGameMode()==="multi"&&(C.singleBoard("player1"),C.singleBoard("player2"))}function t(p){C.singleNumberTags(p),C.singleLetterTags(p)}function c(p){if(p==="player1"){const a=H.getPlayer("player1"),r=document.querySelector("#human-board");C.boardCells(r,a.board),C.singleTags(p)}if(p==="player2"){const a=H.getPlayer("player2"),r=document.querySelector("#computer-board");C.boardCells(r,a.board),C.singleTags(p)}if(p==="computer"){const a=H.getPlayer("computer"),r=document.querySelector("#computer-board");C.boardCells(r,a.board),C.singleTags(p)}}function l(p,a){const r=p;r.innerHTML="";for(let o=0;o<a.length;o++)for(let s=0;s<a[0].length;s++){const m=a[o][s],g=document.createElement("button");if(g.classList.add("cell"),g.dataset.row=o,g.dataset.column=s,m==="miss"&&g.classList.add("miss"),n.getGameMode()==="single"&&(r.id==="computer-board"&&(g.dataset.player="computer",i(g,"click",E=>{v(E.target)})),r.id==="human-board"&&(g.dataset.player="player1",i(g,"dragover",ne),i(g,"drop",re),i(g,"dragenter",ee),i(g,"dragleave",te))),n.getGameMode()==="multi"&&((r.id==="human-board"||r.dataset.player==="player2")&&(i(g,"dragover",ne),i(g,"drop",re),i(g,"dragenter",ee),i(g,"dragleave",te)),r.id==="human-board"&&(g.dataset.player="player1"),r.dataset.player==="player2"&&(g.dataset.player="player2"),h().gameStarted)){const T=n.getCurrentPlayer()==="player1"?"player2":"player1";g.dataset.player===T&&i(g,"click",G=>{v(G.target)})}if(typeof m=="object"&&m!==null&&m!=="miss"){const E=a[o][s];if(r.id==="human-board"||r.dataset.player==="player2"){if(n.getGameMode()==="multi"){const T=n.getCurrentPlayer()==="player1"?"player2":"player1";g.dataset.player!==T&&(g.classList.add("ship"),i(g,"click",G=>{h().gameStarted||J(E)}))}n.getGameMode()==="single"&&(g.classList.add("ship"),i(g,"click",k=>{h().gameStarted||J(E)}))}for(let k=0;k<E.hitCells.length;k++)o===E.hitCells[k][0]&&s===E.hitCells[k][1]&&g.classList.add("hit")}r.appendChild(g)}}function f(p){let a;p==="player1"&&(a="#human .numbers"),(p==="player2"||p==="computer")&&(a="#computer .numbers");const r=document.querySelector(a);if(r){r.innerHTML="";for(let o=0;o<10;o++){const s=document.createElement("div");s.classList.add("number-tag"),s.textContent=o+1,r.appendChild(s)}}}function S(p){let a;p==="player1"&&(a="#human .letters"),(p==="player2"||p==="computer")&&(a="#computer .letters");const r=document.querySelector(a);if(r){r.innerHTML="";const o=["A","B","C","D","E","F","G","H","I","J"];for(let s=0;s<o.length;s++){const m=document.createElement("div");m.classList.add("letter-tag"),m.textContent=o[s],r.appendChild(m)}}}function b(){if(n.getGameMode()==="single"){const p=n.getShipSizes(),a=document.querySelector(".content#human .ships");a.innerHTML="",p.forEach(r=>{const o=document.createElement("div");o.classList.add("ship-container"),o.dataset.length=r,o.dataset.name=j(r),o.draggable=!0;const s=h();o.style.flexDirection=s.isHorizontal?"row":"column",i(o,"dragstart",z),i(o,"dragend",$);for(let m=0;m<r;m++){const g=document.createElement("div");g.classList.add("ship-cell"),o.appendChild(g)}a.appendChild(o)})}if(n.getGameMode()==="multi"){const p=n.getCurrentPlayer(),a=n.getShipSizes();let r,o=p==="player1"?"#human .ships":"#computer .ships";r=document.querySelector(o),r.innerHTML="",a.forEach(s=>{const m=document.createElement("div");m.classList.add("ship-container"),m.dataset.length=s,m.dataset.name=j(s),m.draggable=!0;const g=h();m.style.flexDirection=g.isHorizontal?"row":"column",i(m,"dragstart",z),i(m,"dragend",$);for(let E=0;E<s;E++){const k=document.createElement("div");k.classList.add("ship-cell"),m.appendChild(k)}r.appendChild(m)})}}return{boards:e,singleTags:t,singleBoard:c,boardCells:l,singleNumberTags:f,singleLetterTags:S,ships:b}}();function j(e){const t=h(),c=n.getCurrentPlayer();if(e===5)return`${c}-Carrier`;if(e===4)return`${c}-Battleship`;if(e===3){const l=t.toggle3?"Destroyer":"Submarine";return t.toggle3=!t.toggle3,`${c}-${l}`}if(e===2)return`${c}-Patrol`}function W(e){return j(e)}function X(){F()}function F(){const e=document.getElementById("game-mode-modal"),t=document.getElementById("single-player"),c=document.getElementById("multi-player");i(e,"keydown",l=>{l.key==="Escape"&&l.preventDefault()}),i(t,"click",l=>{V(l,e)}),i(c,"click",l=>{Q(l,e)}),e.showModal()}function V(e,t){t.close(),n.setGameMode("single"),x.game()}function Q(e,t){t.close(),n.setGameMode("multi"),x.game()}function Y(){if(n.getGameMode()==="single"&&document.querySelectorAll(".content").forEach(t=>t.style.visibility="visible"),n.getGameMode()==="multi"){const e=document.querySelector("#human");e.style.visibility="visible"}}function J(e,t,c){const l=H.getPlayer(n.getCurrentPlayer()).board,f=e.length,S=W(f);for(let b=0;b<e.notHitCells.length;b++){const[p,a]=e.notHitCells[b];l[p][a]=null}for(let b=0;b<e.hitCells.length;b++){const[p,a]=e.hitCells[b];l[p][a]=null}Z(f,S),C.singleBoard(n.getCurrentPlayer()),n.areShipsPlaced(l)||R()}function Z(e,t){if(n.getGameMode()==="single"){const c=document.querySelector(".ships"),l=document.createElement("div");l.classList.add("ship-container"),l.dataset.length=e,l.dataset.name=t,l.draggable=!0;const f=h();l.style.flexDirection=f.isHorizontal?"row":"column",i(l,"dragstart",z),i(l,"dragend",$);for(let S=0;S<e;S++){const b=document.createElement("div");b.classList.add("ship-cell"),l.appendChild(b)}c.appendChild(l)}if(n.getGameMode()==="multi"){const c=n.getCurrentPlayer();let l;c==="player1"&&(l=document.querySelector("#human .ships")),c==="player2"&&(l=document.querySelector("#computer .ships"));const f=document.createElement("div");f.classList.add("ship-container"),f.dataset.length=e,f.dataset.name=t,f.draggable=!0;const S=h();f.style.flexDirection=S.isHorizontal?"row":"column",i(f,"dragstart",z),i(f,"dragend",$);for(let b=0;b<e;b++){const p=document.createElement("div");p.classList.add("ship-cell"),f.appendChild(p)}l.appendChild(f)}}function K(){if(n.getGameMode()==="single"){const e=H.getPlayer("player1"),t=H.getPlayer("computer");e.board=n.create(),t.board=n.create()}if(n.getGameMode()==="multi"){const e=H.getPlayer("player1"),t=H.getPlayer("player2");e.board=n.create(),t.board=n.create()}}function O(e){const t=H.getPlayer(e);t.board=n.create()}function d(){const e=H.getPlayer("computer");n.placeShipsRandomly(e.board),C.singleBoard("computer")}function y(){const e=document.getElementById("pass-device-modal"),t=document.getElementById("pass-device-continue"),c=document.querySelector(".pass-device-title"),l=n.getCurrentPlayer(),f=l==="player1"?"Player 2":"Player 1";c.textContent=`Pass the device to the ${f}.`,n.toggleCurrentPlayer();function S(){const b=l==="player1"?"human":"computer",p=l==="player1"?"#human .gameBoard-content":"#computer .gameBoard-content",a=l==="player1"?"#human .buttons":"#computer .buttons",r=l==="player1"?"#human .ships":"#computer .ships",o=l==="player1"?"#human .title-container":"#computer .title-container",s=document.getElementById(b),m=document.querySelector(p),g=document.querySelector(a),E=document.querySelector(r),k=document.querySelector(o),T=l==="player1"?"computer":"human",G=l==="player1"?"#computer .gameBoard-content":"#human .gameBoard-content",le=l==="player1"?"#computer .buttons":"#human .buttons",se=l==="player1"?"#computer .ships":"#human .ships",ce=l==="player1"?"#computer .title-container":"#human .title-container",ue=document.getElementById(T),de=document.querySelector(G),pe=document.querySelector(le),me=document.querySelector(se),ge=document.querySelector(ce);s.style.visibility="hidden",m.style.visibility="visible",g.style.visibility="hidden",E.style.visibility="hidden",k.style.visibility="visible",ue.style.visibility="visible",de.style.visibility="visible",pe.style.visibility="visible",me.style.visibility="visible",ge.style.visibility="visible"}i(e,"keydown",b=>{b.key==="Escape"&&b.preventDefault()}),i(t,"click",b=>{e.close(),S(),C.boards(),D.player2.gameStarted||C.ships()}),e.showModal()}function u(e,t){const c=document.createElement("div");c.classList.add(`${t}-popup`),c.textContent=t==="hit"?"HIT!":"MISS!";const l=e.getBoundingClientRect();c.style.left=`${l.left+l.width/2}px`,c.style.top=`${l.top-30}px`,document.body.appendChild(c),c.addEventListener("animationend",()=>{c.remove()})}function v(e){if(h().gameStarted){if(n.getGameMode()==="single"){if(n.getCurrentPlayer()!=="player1")return;const c=parseInt(e.dataset.row),l=parseInt(e.dataset.column),f=H.getPlayer("computer").board;if(n.receiveAttack(c,l,f)===!1)return;if(n.isGameOver(f)){C.singleBoard("computer"),N("player1");return}const S=f[c][l],b=typeof S=="object"&&S!==null;u(e,b?"hit":"miss"),b?C.singleBoard("computer"):(n.setCurrentPlayer("computer"),C.singleBoard("computer"),setTimeout(()=>{P()},350))}if(n.getGameMode()==="multi"){const c=parseInt(e.dataset.row),l=parseInt(e.dataset.column),f=n.getCurrentPlayer()==="player1"?"player2":"player1",S=H.getPlayer(f);if(n.receiveAttack(c,l,S.board)===!1)return;if(n.isGameOver(S.board)){C.singleBoard(f),N(n.getCurrentPlayer());return}const b=S.board[c][l],p=typeof b=="object"&&b!==null;u(e,p?"hit":"miss"),C.singleBoard(f),p||y()}}}function P(){if(n.getCurrentPlayer()!=="computer")return;const e=H.getPlayer("player1").board,t=100;let c=0;q||(q=[]),L||(L=new Map);function l(a,r){if(a<0||a>=10||r<0||r>=10)return!1;const o=e[a][r];return o==="miss"?!1:typeof o=="object"&&o!==null?!o.hitCells.some(([m,g])=>m===a&&g===r):!0}function f(a,r){const o=L.get(a),s=r.filter(g=>g.ship===a);if(!o||s.length===0)return[];let m=[];if(a.length,o==="horizontal"){const g=s[0].row,E=s.map(G=>G.col),k=Math.min(...E),T=Math.max(...E);for(let G=k-1;G<=T+1;G++)G>=0&&G<10&&l(g,G)&&m.push([g,G])}else if(o==="vertical"){const g=s[0].col,E=s.map(G=>G.row),k=Math.min(...E),T=Math.max(...E);for(let G=k-1;G<=T+1;G++)G>=0&&G<10&&l(G,g)&&m.push([G,g])}return m}function S(a,r){const o=[[a-1,r],[a+1,r],[a,r-1],[a,r+1]];for(let s=o.length-1;s>0;s--){const m=Math.floor(Math.random()*(s+1));[o[s],o[m]]=[o[m],o[s]]}return o.filter(([s,m])=>l(s,m))}function b(a){const r=q.filter(m=>m.ship===a);if(r.length<2)return null;const[o,s]=r;return o.row===s.row?"horizontal":o.col===s.col?"vertical":null}function p(){for(;c<t;){let a,r,o;if(q.length>0){({row:a,col:r,ship:o}=q[0]);let E=L.get(o)||b(o);E&&!L.has(o)&&L.set(o,E);let k=!1;if(E){const T=f(o,q);T.length>0&&([a,r]=T[0],k=!0)}if(!k&&!E){const T=S(a,r);T.length>0&&([a,r]=T[0],k=!0)}if(!k){q.shift(),c++;continue}}else if(a=Math.floor(Math.random()*10),r=Math.floor(Math.random()*10),!l(a,r)){c++;continue}n.receiveAttack(a,r,e);const s=e[a][r],m=document.querySelector(`#human-board .cell[data-row="${a}"][data-column="${r}"]`);if(m&&u(m,typeof s=="object"&&s!==null?"hit":"miss"),typeof s=="object"&&s!==null&&q.push({row:a,col:r,ship:s}),o&&o.isSunk()&&(q=q.filter(E=>E.ship!==o),L.delete(o)),_.hitQueue=q,_.directionMap=L,n.isGameOver(e)){C.singleBoard("player1"),N("computer");return}if(!(typeof s=="object"&&s!==null)){n.setCurrentPlayer("player1"),C.singleBoard("player1");return}C.singleBoard("player1"),setTimeout(()=>{p()},850);return}c>=t&&(console.warn("Computer could not find a valid move after maximum attempts"),n.setCurrentPlayer("player1"))}setTimeout(()=>{p()},350)}function w(){document.querySelectorAll(".buttons button").forEach(t=>t.disabled=!1)}function B(){document.querySelectorAll(".buttons button").forEach(t=>t.disabled=!0)}function M(){document.querySelectorAll(".start-game").forEach(t=>t.disabled=!1)}function R(){document.querySelectorAll(".start-game").forEach(t=>t.disabled=!0)}function N(e){const t=document.getElementById("gameOverModal"),c=document.getElementById("modal-close"),l=document.querySelector(".modal-title");function f(){t.close(),A(),l.classList.remove("win")}if(n.getGameMode()==="single"&&(e==="player1"&&(l.textContent="You win!",l.classList.add("win")),e==="computer"&&(l.textContent="You lose :c")),n.getGameMode()==="multi"){const S=e==="player1"?"Player 1":"Player 2";l.textContent=`${S} wins!`,l.classList.add("win")}i(t,"click",S=>{S.target===t&&f()}),i(t,"keydown",S=>{S.key==="Escape"&&f()}),i(c,"click",()=>{f()}),t.showModal()}function A(){if(K(),n.setCurrentPlayer("player1"),C.boards(),C.ships(),w(),R(),q=[],L=new Map,Object.values(D).forEach(e=>{e.gameStarted=!1,e.draggedShipLength=null,e.draggedShipName=null,e.toggle3=!0,e.isHorizontal=!0,e.highlightedCells.clear()}),n.getGameMode()==="multi"){const e=document.querySelector("#human"),t=document.querySelector("#computer");e.style.visibility="visible",t.style.visibility="hidden";const c=document.querySelector("#human .gameBoard-content"),l=document.querySelector("#human .buttons"),f=document.querySelector("#human .ships"),S=document.querySelector("#human .title-container");c.style.visibility="visible",l.style.visibility="visible",f.style.visibility="visible",S.style.visibility="visible"}F()}function z(e){e.target.style.opacity="0.5";const t=h();t.draggedShipLength=parseInt(e.target.dataset.length),t.draggedShipName=e.target.dataset.name}function $(e){e.target.style.opacity="1",U();const t=h();t.draggedShipLength=null,t.draggedShipName=null}function ee(e){e.preventDefault(),!h().gameStarted&&ae(e.target)}function te(e){e.preventDefault();const t=h();if(t.gameStarted)return;const c=e.relatedTarget;(!c||!t.highlightedCells.has(c))&&U()}function ne(e){e.preventDefault()}function re(e){e.preventDefault();const t=h();if(t.gameStarted)return;const c=parseInt(e.target.dataset.row),l=parseInt(e.target.dataset.column),f=H.getPlayer(n.getCurrentPlayer()).board,S=oe.create(t.draggedShipLength),p=n.getCurrentPlayer()==="player1"?"#human .ships":'.ships[data-player="player2"]',a=document.querySelector(`${p} [data-name="${t.draggedShipName}"]`);n.canBePlaced(c,l,f,S.length,t.isHorizontal)&&(n.place(c,l,f,S,t.isHorizontal),C.singleBoard(n.getCurrentPlayer()),a.remove(),n.areShipsPlaced(f)&&M()),U(),t.draggedShipLength=null,t.draggedShipName=null}function U(){if(n.getGameMode()==="single"&&document.querySelectorAll("#human-board .cell").forEach(t=>{t.classList.remove("valid","invalid")}),n.getGameMode()==="multi"){const e=n.getCurrentPlayer()==="player1"?"#human-board":"#computer-board";document.querySelectorAll(`${e} .cell`).forEach(c=>{c.classList.remove("valid","invalid")})}}function ae(e){U();const t=h();if(!t.draggedShipLength||t.gameStarted)return;const c=parseInt(e.dataset.row),l=parseInt(e.dataset.column),f=H.getPlayer(n.getCurrentPlayer()).board,S=n.getCurrentPlayer()==="player1"?"#human-board":"#computer-board",b=n.canBePlaced(c,l,f,t.draggedShipLength,t.isHorizontal);for(let p=0;p<t.draggedShipLength;p++){const a=t.isHorizontal?c:c+p,r=t.isHorizontal?l+p:l;if(a>=0&&a<10&&r>=0&&r<10){const o=document.querySelector(`${S} .cell[data-row="${a}"][data-column="${r}"]`);o&&(o.classList.add(b?"valid":"invalid"),t.highlightedCells.add(o))}}}function ie(){if(n.getGameMode()==="single"){const e=document.querySelector(".ships");e.innerHTML=""}if(n.getGameMode()==="multi"){let e;n.getCurrentPlayer()==="player1"&&(e=document.querySelector("#human .ships")),n.getCurrentPlayer()==="player2"&&(e=document.querySelector('.ships[data-player="player2"]')),e.innerHTML=""}}return{render:C,setup:x,init:X,resetBoards:K,resetSingleBoard:O,attack:v,gameOver:N,enableButtons:w,disableButtons:B,computerAttack:P,hitQueue:q}}();_.init();
